using Newtonsoft.Json;
using ScrapperWebAPI.Models.BrandDtos;
using ScrapperWebAPI.Models.Zara;
using System.Net.Http;

namespace ScrapperWebAPI.Helpers;

public static class GetZaraCategories
{
    private static string base64 = "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fmWnCxOj7ZhCwd0opuq0pqQXbHv3DRxRtkUyGZEAsCfyAXwxKQcFjE5jAdMrwWRXAJLLM2h2AYqp4U6OAsl7bKfikNyLLkwiIxXAYxEPYN30/iikbaECPodBnREX2x+v1CcLxVKnRpS8C9subu0HgNyF72+nwFEA61ZGOoCL2AWFfbqF+flGopD6D94B2VAKPkCxtMfBUSDZxyWxa+LV1cpR4DQAfBHpAKquhsmS8cyvdisU0P3MkUXfkkazwSiOnqbopQP2pS1flkyBjQD27S9oFkO77rhCKuCIOw4E65tZ5bh86uCQSguSmM/JjyFY86qLb0WQPxML6kizpPoAkLXvLxV3/KXucX/BP+2TEv+AYQihQokIuRhH9CpRpMbIs2Qp8/FVKYXDctpWnd45B8G+KBEWqGJo2p4yDJZR9epFx705tOsZmzZdka4fTzyouLGfjwWl9Ds2Wz+auLG22+wa28rwsLTyCc9X1A8l/uzb8ZcGzbP0k1BKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoVM/8Py0gbF4+VURwAAAAASUVORK5CYII=";

    public async static Task<List<BrandToListDto>> GetAll()
    {
        HttpClient _httpClient = new HttpClient();

        string url = "https://www.zara.com/az/ru/categories?categoryId=2536906&categorySeoId=640&ajax=true";
        var response = await _httpClient.GetAsync(url);
        if (!response.IsSuccessStatusCode)
        {
            throw new Exception();
        }
        string json = await response.Content.ReadAsStringAsync();
        ZaraCategoryRoot data = JsonConvert.DeserializeObject<ZaraCategoryRoot>(json);
        var result = new List<CategoryWithSubcategories>();
        var categories = new List<BrandToListDto>();
        foreach (var cat in data.Categories)
        {
            if (cat.Subcategories != null && cat.Subcategories.Count > 0)
            { 
                foreach (var sub in cat.Subcategories)
                {
                    categories.Add(new BrandToListDto
                    {
                        Name = cat.SectionName + "-" + sub.Name,
                        Type = "category",
                        Img = base64

                    });
                }
            }
        }
        return categories;
    }

}
